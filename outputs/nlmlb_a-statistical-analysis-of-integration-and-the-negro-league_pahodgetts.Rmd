---
title: "A Statistical Analysis of Integration and the Negro League"
author: "Paul A. Hodgetts"
date: "09/04/2021"
output: 
  pdf_document:
    latex_engine: lualatex
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r packages, echo=F, message=F, warning=F}
# uncomment any packages that require installation

# loads tidyverse for working with data
# version 1.3.0
#install.packages("tidyverse")

# loads here for accessing directories
# version 1.0.1
#install.packages("here")
```

```{r libraries, echo=F, message=F, warning=F}

# load tidyverse package
# version 1.3.0
library(tidyverse)

# load here package
# version 1.0.1
library(here)
```

```{r load data, echo=F, message=F, warning=F}
# create list of files ending in .csv in given directory ->
# set full names to false as this will make naming objects easier
files <- list.files(here("inputs/data/csv"), pattern = "*.csv", full.names = F)

# use for loop to load all data files
# for index location in the length of the file list
for(i in 1:length(files)){
     # assign that file name to a new object stripping the .csv ->
     assign(str_replace(files[i], ".csv", ""),
            # apply read_csv function to file ->
            # pasting directory in front of file name ->
            read_csv(here(paste0("inputs/data/csv/", files[i]))), 
            # assign to global environment
            envir = .GlobalEnv)
}

nl_player_data <- nl_player_data %>% 
  mutate(firstname = case_when(firstname == "Milton" & lastname == "Smith" & last_game == "1927" ~ "Milton 27",
                               firstname == "Willie" & lastname == "Smith" & last_game == "1938" ~ "Willie 38",
                               firstname == "Willie" & lastname == "Smith" & last_game == "1948" ~ "Willie 48",
                               firstname == "Clarence" & lastname == "Coleman" & last_game == "1928" ~ "Clarence 28",
                               TRUE ~ as.character(firstname)))


nlmlb_df <- nl_player_data %>% 
     full_join(nl_mlb_player_data, by = c("lastname", "firstname")) %>% 
     mutate(played_mlb = if_else(!is.na(mlb_team), 1, 0))

z <- y %>% 
  mutate(firstname = str_replace(firstname, "\\s\\d*$", ""))
```
